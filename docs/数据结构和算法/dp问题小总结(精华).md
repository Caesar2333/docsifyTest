# è®°å¿†åŒ–æœç´¢ä¸­çš„ cacheçš„ä¸€ç»´è¿˜æ˜¯äºŒç»´æ˜¯è°å†³å®šï¼Ÿï¼Ÿ

## âœ… çŠ¶æ€å®šä¹‰ä¸å‚æ•°æ€ä¹ˆé€‰ï¼Ÿ

ç°åœ¨æˆ‘ä»¬æ¥æ€è€ƒä½ æœ€å…³å¿ƒçš„ï¼š

### â“æœ‰å“ªäº›å˜é‡ä¼šå½±å“ç»“æœï¼Ÿæˆ‘ä»¬è¦ç¼“å­˜å“ªäº›çŠ¶æ€ï¼Ÿ

- å½“å‰ä¸‹æ ‡ `index`ï¼šè¡¨ç¤ºå½“å‰å¤„ç†åˆ°å“ªä¸ªæ•°
- å½“å‰ç´¯åŠ å’Œ `sum`ï¼šè¡¨ç¤ºå½“å‰è¡¨è¾¾å¼çš„å€¼

## é€‰æˆ–è€…æ˜¯ä¸é€‰ï¼Œæˆ–è€…æ˜¯æšä¸¾

* #### åœ¨é€‰æˆ–è€…æ˜¯ä¸é€‰ä¸­ï¼Œé€šå¸¸ä½ çš„`index`æ˜¯éœ€è¦èµ°åˆ°å¤´çš„ï¼Œå¹¶ä¸”è¿˜æœ‰	`capacity`çš„é™åˆ¶ã€‚é‚£å°±æ˜¯äºŒç»´çš„cacheã€‚æ¯”å¦‚ä¸‹é¢çš„é›¶é’±å…‘æ¢ã€‚æ˜¯ä¸€ä¸ªå®Œå…¨èƒŒåŒ…é—®é¢˜ï¼ˆ0-1èƒŒåŒ…  åŠ ä¸Šäº† å…ƒç´ å¯ä»¥é‡å¤é€‰çš„è‡ªç”±ï¼Œå…¶ä¸­ä¸æ”¹å˜ indexå‘ä¸‹ï¼Œä»è€Œä¿æŒé‡å¤ã€‚ï¼‰

  * >#### [322. é›¶é’±å…‘æ¢]
    >
    >ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `coins` ï¼Œè¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•° `amount` ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚
    >
    >è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„ **æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°** ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å› `-1` ã€‚
    >
    >ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚

  * ```java
    class Solution {
        public int coinChange(int[] coins, int amount) {
            int n = coins.length;
            int[][] memo = new int[n][amount + 1];
            for (int[] row : memo) {
                Arrays.fill(row, -1); // -1 è¡¨ç¤ºæ²¡æœ‰è®¡ç®—è¿‡
            }
    
            int ans = dfs(n - 1, amount, coins, memo);
            return ans < Integer.MAX_VALUE / 2 ? ans : -1;
        }
    
        private int dfs(int i, int c, int[] coins, int[][] memo) {
            if (i < 0) {
                return c == 0 ? 0 : Integer.MAX_VALUE / 2; // é™¤ 2 é˜²æ­¢ä¸‹é¢ + 1 æº¢å‡º
            }
            if (memo[i][c] != -1) { // ä¹‹å‰è®¡ç®—è¿‡
                return memo[i][c];
            }
            if (c < coins[i]) { // åªèƒ½ä¸é€‰
                return memo[i][c] = dfs(i - 1, c, coins, memo);
            }
            // ä¸é€‰ vs ç»§ç»­é€‰
            return memo[i][c] = Math.min(dfs(i - 1, c, coins, memo), dfs(i, c - coins[i], coins, memo) + 1);
        }
    }
    
    ```

* #### é‚£æ¯”å¦‚åœ¨æšä¸¾ä¸­ï¼Œéšä¾¿æšä¸¾ã€‚å¯èƒ½åªæœ‰`capacity`çš„é™åˆ¶ï¼Œé‚£å°±åªæœ‰ä¸€ç»´çš„è®°å¿†æ•°ç»„ã€‚

  * >[70. çˆ¬æ¥¼æ¢¯](https://leetcode.cn/problems/climbing-stairs/)
    >
    >
    >
    >å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ `n` é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚
    >
    >æ¯æ¬¡ä½ å¯ä»¥çˆ¬ `1` æˆ– `2` ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ

  * ```java
    class Solution {
        public int climbStairs(int n) {
            int[] memo = new int[n + 1];
            return dfs(n, memo);
        }
    
        private int dfs(int i, int[] memo) {
            if (i <= 1) { // é€’å½’è¾¹ç•Œ
                return 1;
            }
            if (memo[i] != 0) { // ä¹‹å‰è®¡ç®—è¿‡
                return memo[i];
            }
            return memo[i] = dfs(i - 1, memo) + dfs(i - 2, memo); // è®°å¿†åŒ–
        }
    }
    ```

  * #### è¿™é‡Œåªæœ‰ä¸€ä¸ª`capacity`é™åˆ¶ï¼Œæ‰€ä»¥åªæ˜¯ä½¿ç”¨ä¸€ç»´çš„å°±å¯ä»¥äº†ã€‚



## é€‰æˆ–è€…æ˜¯ä¸é€‰ ä¸ç­‰äºä¸€å®šä½¿ç”¨äºŒç»´ã€‚

* #### åœ¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œå¾€å¾€æœ€ç»ˆçš„ç­”æ¡ˆï¼Œæœ‰ä¸¤ä¸ªé™åˆ¶ï¼Œä¸€ä¸ªæ˜¯é€‰æ‹©æˆ–è€…æ˜¯ä¸é€‰æ‹©ï¼Œä¸€ç›´éœ€è¦çš„æ˜¯`index < 0`ï¼ˆåœ¨indexæ˜¯ä»n-1å¼€å§‹çš„ï¼‰ï¼Œå¦å¤–ä¸€ä¸ªé™åˆ¶å°±æ˜¯ èƒŒåŒ…çš„å®¹é‡ï¼Œæœ€åçš„ç»“æœæ˜¯ç”±`index`å’Œ`capacity`æ‰èƒ½å†³å®šçš„ã€‚

* #### è€Œåœ¨ä¸€äº›æ™®é€šçš„é—®é¢˜ä¸­ï¼Œé€‰æˆ–è€…æ˜¯ä¸é€‰ï¼Œå¾€å¾€åªæœ‰`index`ä¸€ä¸ªé™åˆ¶ï¼Œæ‰€ä»¥æ˜¯ä¸€ç»´çš„ã€‚æ‰€ä»¥éœ€è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚ä¸‹é¢çš„æ‰“å®¶åŠ«èˆï¼Œå°±æ˜¯å…¸å‹çš„é€‰æˆ–è€…æ˜¯ä¸é€‰ï¼Œä¸è¿‡åªæœ‰ä¸€ä¸ªindexé™åˆ¶ã€‚æ±‚å¾—æœ€å¤§çš„å€¼ã€‚è€Œä¸Šè¿°çš„é›¶é’±ï¼Œä¹Ÿå°±æ˜¯ å®Œå…¨èƒŒåŒ…é—®é¢˜ï¼Œæ˜¯æœ‰ä¸¤ä¸ªå˜é‡åœ¨é™åˆ¶çš„ï¼Œåœ¨é€‰æˆ–è€…æ˜¯ä¸é€‰çš„æƒ…å†µä¸‹ï¼Œæ±‚å‡ºæœ€å°å€¼çš„è¯ï¼Œéœ€è¦æ»¡è¶³ `index < 0`ï¼Œä»¥åŠ`amount ==0`çš„è¯ï¼Œæ‰èƒ½ç®—æ˜¯ä¸€ä¸ªåˆæ ¼çš„æ–¹æ¡ˆçš„ï¼Œæ‰èƒ½è¿›è¡Œæœ€å°å€¼çš„æ¯”è¾ƒã€‚

  * >[198. æ‰“å®¶åŠ«èˆ](https://leetcode.cn/problems/house-robber/)
    >
    >[ç®—æœ¯è¯„çº§: 3](https://leetcode.cn/xxx)
    >
    >ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å°å·ï¼Œè®¡åˆ’å·çªƒæ²¿è¡—çš„æˆ¿å±‹ã€‚æ¯é—´æˆ¿å†…éƒ½è—æœ‰ä¸€å®šçš„ç°é‡‘ï¼Œå½±å“ä½ å·çªƒçš„å”¯ä¸€åˆ¶çº¦å› ç´ å°±æ˜¯ç›¸é‚»çš„æˆ¿å±‹è£…æœ‰ç›¸äº’è¿é€šçš„é˜²ç›—ç³»ç»Ÿï¼Œ**å¦‚æœä¸¤é—´ç›¸é‚»çš„æˆ¿å±‹åœ¨åŒä¸€æ™šä¸Šè¢«å°å·é—¯å…¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æŠ¥è­¦**ã€‚
    >
    >ç»™å®šä¸€ä¸ªä»£è¡¨æ¯ä¸ªæˆ¿å±‹å­˜æ”¾é‡‘é¢çš„éè´Ÿæ•´æ•°æ•°ç»„ï¼Œè®¡ç®—ä½  **ä¸è§¦åŠ¨è­¦æŠ¥è£…ç½®çš„æƒ…å†µä¸‹** ï¼Œä¸€å¤œä¹‹å†…èƒ½å¤Ÿå·çªƒåˆ°çš„æœ€é«˜é‡‘é¢ã€‚

  * ```java
    class Solution {
        public int rob(int[] nums) {
            int n = nums.length;
            int[] memo = new int[n];
            Arrays.fill(memo, -1); // -1 è¡¨ç¤ºæ²¡æœ‰è®¡ç®—è¿‡
            return dfs(n - 1, nums, memo); // ä»æœ€åä¸€ä¸ªæˆ¿å­å¼€å§‹æ€è€ƒ
        }
    
        // dfs(i) è¡¨ç¤ºä» nums[0] åˆ° nums[i] æœ€å¤šèƒ½å·å¤šå°‘
        private int dfs(int i, int[] nums, int[] memo) {
            if (i < 0) { // é€’å½’è¾¹ç•Œï¼ˆæ²¡æœ‰æˆ¿å­ï¼‰
                return 0;
            }
            if (memo[i] != -1) { // ä¹‹å‰è®¡ç®—è¿‡
                return memo[i];
            }
            int notChoose = dfs(i - 1, nums, memo);
            int choose = dfs(i - 2, nums, memo) + nums[i];
            return memo[i] = Math.max(notChoose, choose); // è¿”å›ç­”æ¡ˆå¹¶è®°å¿†åŒ–
        }
    }
    ```

  * ä¸Šè¿°ä¹‹åä¸€ä¸ª`index`çš„é™åˆ¶ï¼Œæ‰€ä»¥åªæ˜¯ä¸€ç»´çš„ã€‚







# é‚£ä¹ˆé¡ºåºæ•æ„Ÿåº”è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæ¯”å¦‚æœ‰äº›æ–¹æ¡ˆçš„è¾“å‡ºæ˜¯ä¸å…è®¸é‡å¤çš„[1,2]å’Œ[2,1]å°±æ˜¯é‡å¤çš„ã€‚

* #### é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ææ¸…æ¥šï¼Œé‡å¤æ ¹æºåœ¨å“ªé‡Œã€‚é‡å¤çš„æ ¹æºåœ¨äºä½ å›å¤´äº†ã€‚

## é€‰å’Œä¸é€‰çš„æ–¹æ¡ˆä¸­ ä¼šå›å¤´å—ï¼Ÿï¼Ÿ

* #### é€‰å’Œä¸é€‰æ–¹æ¡ˆä¸­ï¼Œå¤©ç„¶å°±æ˜¯ä¸ä¼šå›å¤´çš„ã€‚å› ä¸ºåœ¨è·¯ä¸Šéƒ½æ˜¯`index - 1`ï¼Œæˆ–è€…æ˜¯åœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œç”±äºåŒä¸€ä¸ªå…ƒç´ å¯ä»¥é‡å¤é€‰æ‹©ï¼Œé‚£ä¹ˆå…¶`index`ä¹Ÿæ˜¯ä¼šåŸåœ°è¸æ­¥çš„ã€‚æ‰€ä»¥å¤©ç„¶å°±æ˜¯ä¸ä¼šå›å¤´çš„ã€‚

* >[78. å­é›†](https://leetcode.cn/problems/subsets/)
  >
  >ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚
  >
  >è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

* ```java
  class Solution {
      public List<List<Integer>> subsets(int[] nums) {
          List<List<Integer>> ans = new ArrayList<>();
          List<Integer> path = new ArrayList<>();
          dfs(0, nums, path, ans);
          return ans;
      }
  
      private void dfs(int i, int[] nums, List<Integer> path, List<List<Integer>> ans) {
          if (i == nums.length) { // å­é›†æ„é€ å®Œæ¯•
              ans.add(new ArrayList<>(path)); // å¤åˆ¶ path
              return;
          }
  
          // ä¸é€‰ nums[i]
          dfs(i + 1, nums, path, ans);
  
          // é€‰ nums[i]
          path.add(nums[i]);
          dfs(i + 1, nums, path, ans);
          path.removeLast(); // path.remove(path.size() - 1);
      }
  }
  ```

* #### çœ‹åˆ°æ²¡ï¼Ÿé€‰å’Œä¸é€‰æ–¹æ³•ä¸­ï¼Œ`index`å°±æˆä¸ºäº†åˆæ³•æ–¹æ¡ˆçš„ä¸€ä¸ªé™åˆ¶ã€‚æœ€åçš„æ—¶å€™éœ€è¦ç¡®å®š`index == nums.length`ï¼Œå½“ç„¶è¿™ä¸ªæ˜¯æ­£å‘æ¥çš„ã€‚

## æšä¸¾æ–¹æ¡ˆå‘¢ï¼Ÿæšä¸¾æ–¹æ¡ˆçš„è¯ï¼Œæ˜¯å¯ä»¥æ§åˆ¶å›å¤´çš„

> æšä¸¾æ˜¯å¯ä»¥æ§åˆ¶å»é‡çš„ï¼Œåªè¦ä½  for å¾ªç¯ä» index å¼€å§‹ï¼Œå°±ä¸ä¼šé‡å¤

âœ”ï¸ è¿™å¥è¯éå¸¸å…³é”®ï¼ä½ æŠŠå»é‡æœ¬è´¨ç‚¹ç ´äº†ï¼š

> â€œå»é‡â€ä¸æ˜¯é»‘é­”æ³•ï¼Œè€Œæ˜¯**äººä¸ºæ§åˆ¶ for å¾ªç¯èµ·ç‚¹ + index çº¦æŸè·¯å¾„ä¸å›å¤´**

- #### `for (int i = 0; i < n)` â†’ ä¼šå›å¤´ â†’ é¡ºåºæ•æ„Ÿ â†’ æšä¸¾æ’åˆ—

- #### `for (int i = index; i < n)` â†’ ä¸å›å¤´ â†’ é¡ºåºæ— å…³ â†’ æšä¸¾ç»„åˆ

### ğŸ§  æ€»ç»“ä½ çš„è¡¥å……çš„æ ¸å¿ƒé€»è¾‘ï¼š

> #### é¡ºåºé‡å¤çš„æ¥æºåœ¨äºâ€œæ˜¯å¦å…è®¸ä»å¤´å¼€å§‹æšä¸¾ï¼ˆi = 0ï¼‰â€ï¼Œè€Œä¸æ˜¯é€’å½’å‚æ•°æœ¬èº«
>
> ####  æ§åˆ¶å›å¤´/ä¸å›å¤´çš„æ ¹æœ¬æ‰‹æ®µæ˜¯ for çš„èµ·ç‚¹ï¼Œè€Œä¸æ˜¯æ˜¯ä¸æ˜¯ç”¨äº† index è¿™ä¸ªå‚æ•°



### æšä¸¾æ§åˆ¶å›å¤´â€”â€”æ±‚å‡ºå­é›†ï¼ˆä¸å…è®¸é‡å¤ï¼‰

* >[78. å­é›†](https://leetcode.cn/problems/subsets/)
  >
  >ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œæ•°ç»„ä¸­çš„å…ƒç´  **äº’ä¸ç›¸åŒ** ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚
  >
  >è§£é›† **ä¸èƒ½** åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›è§£é›†ã€‚

* ```java
  class Solution {
      public List<List<Integer>> subsets(int[] nums) {
  
          // å­é›†çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯é€‰æ‹©æˆ–è€…æ˜¯ä¸é€‰
          // æ¯æ¬¡åˆ°è¾¾è¿™ä¸ªèŠ‚ç‚¹éœ€è¦ æ¢å¤ç°åœº
  
          List<List<Integer>> list = new ArrayList<>();
          List<Integer> path = new ArrayList<>(); // å…¶ä¸­çš„è¿™ä¸ªpathå°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªå…ƒç´ 
  
          dfs(list,nums,path,0); // ä¸€å¼€å§‹æ˜¯0
          return list;
          
      }
  
      public void dfs(List<List<Integer>> list,int[] nums,List<Integer> path,int index)
      {
          // ä»»ä½•å¯èƒ½çš„èŠ‚ç‚¹ éƒ½æ˜¯æ­£ç¡®çš„ï¼ŒåŒ…æ‹¬ä¸€å¼€å§‹çš„[]ç©ºæ•°ç»„
          list.add(new ArrayList<>(path));
  
          // ç«™åœ¨ç­”æ¡ˆçš„è§’åº¦ï¼Œå»æšä¸¾æ¯ä¸€ä¸ªå¤§äºè‡ªå·±çš„ï¼Œå‘æ•£çš„æ€ç»´ï¼Œä¸è¿‡é™åˆ¶æ¡ä»¶ï¼Œä¸‹æ ‡åœ¨æˆ‘ä¹‹åä¸”ä¸å¤§äºn
          for(int i = index; i < nums.length;i++) // ä» i åˆ°indexçš„
          {
              path.add(nums[i]); // æ›´æ–°ç­”æ¡ˆ
              dfs(list,nums,path,i + 1); // ä»å½“å‰çš„åºå·å¼€å§‹æšä¸¾çš„ï¼Œæ¯æ¬¡å¾ªç¯éƒ½å¢åŠ 1
              path.removeLast();
          }
  
      }
  
  }
  ```

  * #### å­é›†æ˜¯è¦æ±‚æœ€åçš„ç»„åˆæ˜¯ä¸å…è®¸é‡å¤çš„ï¼Œæ‰€ä»¥å¯ä»¥æ³¨æ„åˆ°



### æšä¸¾æ§åˆ¶å›å¤´â€”â€”ç»„åˆæ€»æ•°ï¼ˆå¯ä»¥å›å¤´ï¼‰â€”â€”è¦æ±‚çš„æ˜¯æ’åˆ—ä¸åŒï¼Œä¹Ÿç®—ä½œæ˜¯ä¸€ä¸ªç»“æœ

* >[377. ç»„åˆæ€»å’Œ â…£](https://leetcode.cn/problems/combination-sum-iv/)
  >
  >ç»™ä½ ä¸€ä¸ªç”± **ä¸åŒ** æ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œå’Œä¸€ä¸ªç›®æ ‡æ•´æ•° `target` ã€‚è¯·ä½ ä» `nums` ä¸­æ‰¾å‡ºå¹¶è¿”å›æ€»å’Œä¸º `target` çš„å…ƒç´ ç»„åˆçš„ä¸ªæ•°ã€‚
  >
  >é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ã€‚
  >
  >**ç¤ºä¾‹ 1ï¼š**
  >
  >```java
  >è¾“å…¥ï¼šnums = [1,2,3], target = 4
  >è¾“å‡ºï¼š7
  >è§£é‡Šï¼š
  >æ‰€æœ‰å¯èƒ½çš„ç»„åˆä¸ºï¼š
  >(1, 1, 1, 1)
  >(1, 1, 2)
  >(1, 2, 1)
  >(1, 3)
  >(2, 1, 1)
  >(2, 2)
  >(3, 1)
  >è¯·æ³¨æ„ï¼Œé¡ºåºä¸åŒçš„åºåˆ—è¢«è§†ä½œä¸åŒçš„ç»„åˆã€‚
  >```

* ```java
  class Solution {
      public int combinationSum4(int[] nums, int target) {
          int[] memo = new int[target + 1];
          Arrays.fill(memo, -1); // -1 è¡¨ç¤ºæ²¡æœ‰è®¡ç®—è¿‡
          return dfs(target, nums, memo);
      }
  
      private int dfs(int i, int[] nums, int[] memo) {
          if (i == 0) { // çˆ¬å®Œäº†
              return 1;
          }
          if (memo[i] != -1) { // ä¹‹å‰è®¡ç®—è¿‡
              return memo[i];
          }
          int res = 0;
          for(int j = 0; j < nums.length; j++) // æ¯æ¬¡éƒ½æ˜¯é‡æ–°å¼€å§‹çš„ï¼Œå› ä¸ºé¢˜ç›®æ˜ç¡®è¡¨ç¤ºï¼Œä¸åŒçš„é¡ºåºè¡¨ç¤ºçš„æ˜¯ä¸åŒçš„ç­”æ¡ˆçš„
          {
              if(nums[j] <= i) // æ»¡è¶³é™åˆ¶æ¡ä»¶ éšä¾¿æšä¸¾
              {
                  res += dfs(i-nums[j],nums,memo);
              }
          }
  
          return memo[i] = res; // è®°å¿†åŒ–
      }
  }
  ```

* #### æ¯ä¸€æ¬¡å¾ªç¯éƒ½æ˜¯ä»å¤´å¼€å§‹çš„ã€‚

* #### è€Œä¸”è¿™é‡Œæ˜¯æšä¸¾ï¼Œä½ çš„`index`æ²¡æœ‰å¿…è¦èµ°åˆ°å¤´ï¼Œæ‰€ä»¥`index`ä¸æ˜¯é™åˆ¶ä½ ç»“æœå˜é‡ï¼Œ`target`æ‰æ˜¯ï¼Œæ‰€ä»¥è¯´` return dfs(target, nums, memo);`ï¼Œä¸è¿‡åœ¨å®šä¹‰`dfs`å‡½æ•°çš„æ—¶å€™éå¸¸å‚»é€¼ï¼Œé‡Œé¢çš„å®šä¹‰ï¼Œå®šä¹‰æˆä¸ºäº†`int i`ã€‚





# æ¯ä¸€æ­¥é€‰æ‹©çš„å…ƒç´  æ˜¯å¦å¯ä»¥é‡å¤

* #### è¿™ä¸ªé—®é¢˜å°±åƒä¹‹å‰çš„`é›¶é’±å’Œ`ä¸€æ ·ï¼Œä½ åœ¨é€‰æ‹©`é€‰å’Œä¸é€‰`çš„æ—¶å€™ï¼Œç›´æ¥`index`åŸåœ°è¸æ­¥å°±å¥½äº†ã€‚

* #### ä¹‹æ‰€ä»¥é€‰æ‹©`é€‰å’Œä¸é€‰æ¥åš`ï¼Œæ˜¯å› ä¸ºèƒŒåŒ…é—®é¢˜ï¼Œä¸å…è®¸å›å¤´ï¼Œé‚£ä¹ˆé€‰å’Œä¸é€‰å½“ç„¶ä¸å›å¤´ã€‚



# é‚£ä¹ˆå¸¸è§é¢˜å‹ä¸­ï¼Œæ±‚æœ€å¤§å€¼ï¼Œæ±‚æœ€å°å€¼ï¼Œä»¥åŠæ±‚æ–¹æ¡ˆçš„æ€»æ•°ï¼Œè¿™äº›ä»¥ä¸ºç€ä»€ä¹ˆå‘¢ï¼Ÿ

* #### ä¸€èˆ¬æ±‚æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œæ˜¯ä¸ä¼šåœ¨ä¹æ’åˆ—çš„ã€‚åªåœ¨ä¹ç»“æœçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨é€‰æˆ–è€…æ˜¯ä¸é€‰ï¼Œå› ä¸ºä¸€ç›´ä¸å›å¤´ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨æšä¸¾æ§åˆ¶å›å¤´ã€‚

* #### è€Œæ±‚æ–¹æ¡ˆçš„æ€»æ•°ï¼Œéœ€è¦çœ‹ä¸€ä¸‹é¢˜ç›®æ˜¯æ€ä¹ˆå®šä¹‰æ–¹æ¡ˆçš„ã€‚å¦‚æœåœ¨ä¹æ–¹æ¡ˆçš„æ’åˆ—ï¼Œé‚£ä¹ˆåªèƒ½ä½¿ç”¨æšä¸¾æ§åˆ¶å›å¤´ï¼Œå¦‚æœä¸åœ¨ä¹æ’åˆ—çš„è¯ï¼Œé‚£ä¹ˆé€‰å’Œä¸é€‰ï¼Œä»¥åŠæšä¸¾éƒ½æ˜¯å¯ä»¥çš„ã€‚



# å¯¹äºåŒindexçš„æƒ…å†µï¼Œæœ‰äº›æƒ…å†µæ˜¯éœ€è¦æ‰©å®¹cacheçš„

## `index1`çš„-1å¯èƒ½å’Œ`index2`çš„å…¶ä»–ä¸ä¸º-1çš„å€¼ æ„æˆä¸€ä¸ªåˆæ³•çš„ç»„åˆï¼Œæ˜¯éœ€è¦å­˜å‚¨åœ¨cacheæ•°ç»„ä¸­çš„ã€‚

>[97. äº¤é”™å­—ç¬¦ä¸²](https://leetcode.cn/problems/interleaving-string/)
>
>ç»™å®šä¸‰ä¸ªå­—ç¬¦ä¸² `s1`ã€`s2`ã€`s3`ï¼Œè¯·ä½ å¸®å¿™éªŒè¯ `s3` æ˜¯å¦æ˜¯ç”± `s1` å’Œ `s2` **äº¤é”™** ç»„æˆçš„ã€‚
>
>ä¸¤ä¸ªå­—ç¬¦ä¸² `s` å’Œ `t` **äº¤é”™** çš„å®šä¹‰ä¸è¿‡ç¨‹å¦‚ä¸‹ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦ä¸²éƒ½ä¼šè¢«åˆ†å‰²æˆè‹¥å¹² **éç©º** å­å­—ç¬¦ä¸²ï¼š
>
>- `s = s1 + s2 + ... + sn`
>- `t = t1 + t2 + ... + tm`
>- `|n - m| <= 1`
>- **äº¤é”™** æ˜¯ `s1 + t1 + s2 + t2 + s3 + t3 + ...` æˆ–è€… `t1 + s1 + t2 + s2 + t3 + s3 + ...`
>
>**æ³¨æ„ï¼š**`a + b` æ„å‘³ç€å­—ç¬¦ä¸² `a` å’Œ `b` è¿æ¥ã€‚

```java
class Solution {
    public boolean isInterleave(String s1, String s2, String s3) {

        // äº¤é”™çš„å®šä¹‰ä¸º 
        // s1å’Œs2å…¨éƒ¨éœ€è¦ä½¿ç”¨å®Œ
        // ä¸”äº¤é”™çš„é¡ºåº ä¸­é—´ä¸ç®¡å·®äº†å¤šå°‘ä¸ªï¼Œå¦‚æœä½ ä¸€å¼€å§‹æ˜¯ s1å…ˆçš„è¯ï¼Œé‚£ä¹ˆs2åï¼Œé‚£ä¹ˆåç»­ä¹Ÿå¾—è¿™æ ·
        // s1å’Œs2çš„é•¿åº¦çš„ç»å¯¹å€¼  <=1
        char[] c1 = s1.toCharArray();
        char[] c2 = s2.toCharArray();
        char[] c3 = s3.toCharArray();

        if(c1.length + c2.length != c3.length) return false;
        // ä»å°¾å·´æ€è€ƒï¼Œæ›´å¥½ä¸€äº›ã€‚
        int[][] cache = new int[c1.length + 1][c2.length + 1]; // è¿™é‡Œéœ€è¦æ‰©å®¹ï¼Œå› ä¸ºå­˜åœ¨-1çš„å­˜åœ¨ã€‚
        // ä¸ºä»€ä¹ˆå‘¢ï¼Ÿï¼Ÿå› ä¸º æˆ‘ä»¬çš„è¾¹ç•Œæ˜¯ å…¨éƒ¨éƒ½ä¸º-1æ‰æˆç«‹çš„ï¼Œæ‰€ä»¥å¯èƒ½å­˜åœ¨ï¼Œ
        // ä¸€ä¸ªä¸º-1ï¼Œå¦å¤–ä¸€ä¸ªè¿˜æ˜¯æ­£æ•°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†-1å½“åš0ï¼Œ0å½“åš1,
        // æˆ‘ä»¬åªæ˜¯åœ¨ dfsä¸­åŠ ï¼Œ
        // ä¼ è¾“è¿›å» è¿˜æ˜¯ n-1å’Œm-1ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†è¿åˆ æ•°ç»„çš„å€¼

        // é‚£ä¹‹å‰çš„èƒŒåŒ… ä¸ºä»€ä¹ˆindexä¸éœ€è¦å‘¢ï¼Ÿï¼Ÿå› ä¸ºindexåªæ˜¯ä¸€ä¸ªä¸º-1çš„æƒ…å†µï¼Œamountçš„çŠ¶å†µå·²ç»æ˜¯æ‰©å®¹äº†
        // åªæœ‰0å’Œamountçš„çŠ¶æ€ï¼Œè€Œindexç»è¿‡é€’å½’æ£€æµ‹ä¹‹åï¼Œä¼šç«‹é©¬æ‰“å›çš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è®°å½•çŠ¶æ€çš„æƒ…å†µ

        for(int[] c :  cache)
        {
            Arrays.fill(c,-1);
        }

        return dfs(c1.length - 1,c2.length - 1,c1,c2,c3,cache);
    }

    public boolean dfs(int s, int t, char[] c1, char[] c2, char[] c3,int[][] cache)
    {

        // å­˜åœ¨ä¸¤ç§å¯èƒ½æ€§ï¼Œåªè¦å·¦å³ä¸¤è¾¹ä»»ä½•ä¸€ç§å¯èƒ½æ€§å¯ä»¥çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯å¯ä»¥çš„
        // æ€è€ƒä¸€ä¸‹ ä»€ä¹ˆæƒ…å†µä¸‹ æ‰ä¼šå¾€ä¸‹åŒ¹é…å‘¢ï¼Ÿï¼Ÿéœ€è¦æ˜¯ä¸¤ä¸ªä¸­çš„å…¶ä¸­ä¸€ä¸ª
        // å…ƒç´ å’Œc3ç›¸åŒçš„ï¼Œé‚£å¦‚æœ éƒ½èµ°ä¸‹æ¥çš„è¯ï¼Œé‚£ä¹ˆå°±è¯´æ˜æ˜¯åˆ°å¤´äº†ï¼Œå°±æ˜¯true
        if(s < 0 && t < 0) return true;

        if(cache[s + 1][t + 1] != -1) return cache[s + 1][t + 1] == 1;

        boolean left = false;
        boolean right = false;

        // åŒ¹é…çš„æ˜¯s
        if(s >= 0 && c1[s] == c3[s+t+1])
        {
            left = dfs(s-1,t,c1,c2,c3,cache);
        } 

        if(t >= 0 && c2[t] == c3[s+t+1])
        {
            right = dfs(s,t-1,c1,c2,c3,cache);
        }

        cache[s + 1][t + 1] = (right || left) ? 1 : 0;

        return right || left;

    }

}
```

* #### ä¸Šè¿°ä¸ºäº†å‘¢ï¼Ÿï¼Ÿéœ€è¦æ‰©å®¹å‘¢ï¼Ÿï¼Ÿ

* #### å› ä¸ºä½ ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²è€—å°½äº†ã€‚å‰©ä¸‹çš„å­—ç¬¦å¯èƒ½éƒ½æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ä¸²çš„ï¼Œæ‰€ä»¥`(-1,index2)`ä½œä¸ºä¸€ä¸ªåˆæ³•çš„ç»„åˆï¼Œä¸€ç›´åœ¨é€’å½’çš„ã€‚ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯ä¸‹æ ‡ï¼‰

* #### è¿™æ ·çš„è¯ï¼Œä½ çš„`cache`ä¸­æ˜¯éœ€è¦å­˜å‚¨å¥½è¿™äº›åˆæ³•çš„ç»„åˆçš„å€¼çš„ã€‚

## åŒæ ·æ˜¯åŒå‚æ•°çš„æƒ…å†µä¸‹ï¼Œ`index1 = -1`çš„æƒ…å†µä¼šå‡ºç°ï¼Œä¸”`index2 != -1`ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æ˜¯ç«‹é©¬è¿”å›ï¼Œç›´æ¥ç»“æŸã€‚é‚£ä¹ˆè¿™ä¸ªç»“æœä¼šè¢«ç«‹é©¬è¿”å›åˆ°ä¸Šä¸€æ¬¡çš„`index1 = 0,index2 != -1`ä¸­è¿™ä¸ª`cache`ç»“æœä¸­å»çš„ã€‚æ‰€ä»¥cacheæ˜¯ä¸éœ€è¦é¢å¤–è®°å½•çš„ã€‚

>[1143. æœ€é•¿å…¬å…±å­åºåˆ—](https://leetcode.cn/problems/longest-common-subsequence/)
>
>ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `text1` å’Œ `text2`ï¼Œè¿”å›è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿ **å…¬å…±å­åºåˆ—** çš„é•¿åº¦ã€‚å¦‚æœä¸å­˜åœ¨ **å…¬å…±å­åºåˆ—** ï¼Œè¿”å› `0` ã€‚
>
>ä¸€ä¸ªå­—ç¬¦ä¸²çš„ **å­åºåˆ—** æ˜¯æŒ‡è¿™æ ·ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼šå®ƒæ˜¯ç”±åŸå­—ç¬¦ä¸²åœ¨ä¸æ”¹å˜å­—ç¬¦çš„ç›¸å¯¹é¡ºåºçš„æƒ…å†µä¸‹åˆ é™¤æŸäº›å­—ç¬¦ï¼ˆä¹Ÿå¯ä»¥ä¸åˆ é™¤ä»»ä½•å­—ç¬¦ï¼‰åç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚
>
>- ä¾‹å¦‚ï¼Œ`"ace"` æ˜¯ `"abcde"` çš„å­åºåˆ—ï¼Œä½† `"aec"` ä¸æ˜¯ `"abcde"` çš„å­åºåˆ—ã€‚
>
>ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ **å…¬å…±å­åºåˆ—** æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€å…±åŒæ‹¥æœ‰çš„å­åºåˆ—ã€‚
>
>

```java
class Solution {
    public int longestCommonSubsequence(String text1, String text2) {

        char[] c1 = text1.toCharArray();
        char[] c2 = text2.toCharArray();
        int s = c1.length;
        int t = c2.length;
        int[][] cache = new int[s][t];
        for(int[] c : cache)
        {
            Arrays.fill(c,-1);
        }
        return dfs(s-1,t-1,c1,c2,cache);
        
    }

    public int dfs(int s, int t, char[] text1, char[] text2,int[][] cache)
    {
        
        if(s < 0 || t < 0) return 0; // è¿™é‡Œçš„è¾¹ç•Œ æ˜¯å…¶ä¸­ä¸€ä¸ªäººä¸º-1ã€‚å°±ä¼šç«‹é©¬åå¼¹ï¼Œæ‰€ä»¥ä¸ä¼šå‡ºç° ä¸€ä¸ªä¸º-1,å¦å¤–ä¸€ä¸ªè¿˜åœ¨ç»§ç»­çš„æƒ…å†µï¼Œæ‰€ä»¥æ²¡æœ‰å…³ç³»ã€‚

        if(cache[s][t] != -1) return cache[s][t];

        if(text1[s] == text2[t])
        {
            // å¦‚æœæ˜¯ç›¸ç­‰çš„è¯ï¼Œé‚£ä¹ˆæ‰å¯ä»¥ä¸‹å»è¿›æ­¥ï¼Œä¸”é•¿åº¦ + 1ï¼Œä¸”åªæœ‰å…¶ä¸€ä¸ªäºº

            // return cache[s][t] = Math.max(Math.max(dfs(s-1,t-1,text1,text2,cache) + 1, dfs(s-1,t,text1,text2,cache)),Math.max(dfs(s,t-1,text1,text2,cache),dfs(s-1,t-1,text1,text2,cache)));
            return cache[s][t] = dfs(s-1,t-1,text1,text2,cache) + 1; // åªéœ€è¦è®¡ç®—è¿™ä¸ªï¼Œå› ä¸ºè¿™ä¸ªç»è¿‡æ¨å¯¼æ˜¯æœ€å¤§çš„
        }

        // å¦‚æœä¸ç›¸ç­‰è¯ï¼Œå‰©ä¸‹çš„ä¸‰ç§æšä¸¾
        // return cache[s][t] = Math.max(Math.max(dfs(s-1,t,text1,text2,cache),dfs(s,t-1,text1,text2,cache)),dfs(s-1,t-1,text1,text2,cache));
        return cache[s][t] = Math.max(dfs(s-1,t,text1,text2,cache),dfs(s,t-1,text1,text2,cache));// 
        // è¿™ä¸ªä¹Ÿæ˜¯åŒç†ï¼Œåªéœ€è¦æ¨å¯¼æœ€å¤§çš„å°±å¯ä»¥
    }

}
```

* #### è¿™é‡Œæ˜¯ä¸éœ€è¦æ‰©å®¹çš„ï¼Œåªè¦ç¢°åˆ°`-1`çš„æ—¶å€™ï¼Œæ˜¯ç«‹é©¬è¿”å›çš„ï¼Œæ‰€ä»¥ä¸å¯èƒ½å‡ºç°`ï¼ˆ-1ï¼Œindex2ï¼‰`è¿™ç§åˆæ³•ç»„åˆçš„ã€‚

* #### éœ€è¦æ³¨æ„çš„`cache`æ˜¯è®°å½•åˆæ³•ç»„åˆçš„ï¼Œæ˜¯è®°å¿†æ•°ç»„ï¼Œéåˆæ³•çš„ç»„åˆæ˜¯ä¸ç”¨è®°å½•çš„ã€‚





# dpä¸­çš„ åŒ dfs

* #### å…¶ä¸­çš„ä¸€ä¸ª`dfsCount`è´Ÿè´£å…¨éƒ¨éå†ï¼Œä½¿ç”¨`int[][] Cache`è®°å½•ä¸€äº›è½»é‡çš„æ•°æ®

* #### è€Œå…¶ä¸­çš„ä¸€ä¸ª`dfs`ä¸­ ä½¿ç”¨çš„æ˜¯æ˜¯`dfsCount`è´Ÿè´£çš„éå†ï¼Œä½¿ç”¨çš„æ˜¯`dfsCount`çš„cacheï¼Œåªæ˜¯éœ€è¦`dfsCount`ç»“æœç›´æ¥æ‹¼æ¥å­—ç¬¦ä¸²å°±å¥½äº†ã€‚

### ğŸ§  æŠ½è±¡ä¸€ä¸‹è¿™ä¸ªæ€ç»´æ¨¡å‹ï¼š

| é˜¶æ®µ         | ä½œç”¨                       | å‡½æ•°åï¼ˆå¯è‡ªå®šä¹‰ï¼‰                    | æ˜¯å¦è®°å¿†åŒ–         | é€’å½’åˆ†æ”¯æƒ…å†µ                     |
| ------------ | -------------------------- | ------------------------------------- | ------------------ | -------------------------------- |
| **ç¬¬ä¸€é˜¶æ®µ** | è§£å†³â€œé€‰å“ªä¸ªæ›´ä¼˜â€           | `dfsCount(i, j)` / `dp(i,j)`          | âœ… æ˜¯               | æ¯ä¸ªçŠ¶æ€æœ‰å¤šåˆ†æ”¯ï¼Œå¿…é¡»ç¼“å­˜       |
| **ç¬¬äºŒé˜¶æ®µ** | é¡ºç€â€œæœ€ä¼˜è·¯å¾„â€æ„é€ å®é™…ç­”æ¡ˆ | `makeAns(i, j)` / `dfsConstruct(i,j)` | âŒ å¦ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰ | åªèµ°ä¸€æ¡è·¯å¾„ï¼Œåƒé“¾è¡¨ä¸€æ ·å•æ”¯å‘ä¸‹ |

>[1092. æœ€çŸ­å…¬å…±è¶…åºåˆ—](https://leetcode.cn/problems/shortest-common-supersequence/)
>
>ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `str1` å’Œ `str2`ï¼Œè¿”å›åŒæ—¶ä»¥ `str1` å’Œ `str2` ä½œä¸º **å­åºåˆ—** çš„æœ€çŸ­å­—ç¬¦ä¸²ã€‚å¦‚æœç­”æ¡ˆä¸æ­¢ä¸€ä¸ªï¼Œåˆ™å¯ä»¥è¿”å›æ»¡è¶³æ¡ä»¶çš„ **ä»»æ„ä¸€ä¸ª** ç­”æ¡ˆã€‚
>
>å¦‚æœä»å­—ç¬¦ä¸² `t` ä¸­åˆ é™¤ä¸€äº›å­—ç¬¦ï¼ˆä¹Ÿå¯èƒ½ä¸åˆ é™¤ï¼‰ï¼Œå¯ä»¥å¾—åˆ°å­—ç¬¦ä¸² `s` ï¼Œé‚£ä¹ˆ `s` å°±æ˜¯ t çš„ä¸€ä¸ªå­åºåˆ—ã€‚

## dfséå†å’Œæ‹¼æ¥éƒ½æ˜¯æˆ‘ä¸€ä¸ªäººå¹²

```java
// èƒ½é€šè¿‡çš„æµ‹è¯•æ•°æ®æ›´å¤šï¼Œä½†è¶…å†…å­˜äº†ï¼Œè¿˜éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–
class Solution {
    private String s, t;
    private String[][] memo;

    public String shortestCommonSupersequence(String str1, String str2) {
        s = str1;
        t = str2;
        memo = new String[s.length()][t.length()];
        return dfs(s.length() - 1, t.length() - 1);
    }

    // dfs(i,j) è¿”å› s çš„å‰ i ä¸ªå­—æ¯å’Œ t çš„å‰ j ä¸ªå­—æ¯çš„æœ€çŸ­å…¬å…±è¶…åºåˆ—
    private String dfs(int i, int j) {
        if (i < 0) return t.substring(0, j + 1); // s æ˜¯ç©ºä¸²ï¼Œè¿”å›å‰©ä½™çš„ t
        if (j < 0) return s.substring(0, i + 1); // t æ˜¯ç©ºä¸²ï¼Œè¿”å›å‰©ä½™çš„ s
        if (memo[i][j] != null) return memo[i][j]; // é¿å…é‡å¤è®¡ç®— dfs çš„ç»“æœ
        if (s.charAt(i) == t.charAt(j)) // æœ€çŸ­å…¬å…±è¶…åºåˆ—ä¸€å®šåŒ…å« s[i]
            return memo[i][j] = dfs(i - 1, j - 1) + s.charAt(i);
        var ans1 = dfs(i - 1, j);
        var ans2 = dfs(i, j - 1);
        if (ans1.length() < ans2.length()) // å– ans1 å’Œ ans2 ä¸­æ›´çŸ­çš„ç»„æˆç­”æ¡ˆ
            return memo[i][j] = ans1 + s.charAt(i);
        return memo[i][j] = ans2 + t.charAt(j);
    }
}
```

å¤æ‚åº¦åˆ†æ

* #### æ—¶é—´å¤æ‚åº¦ï¼šO(nm(n+m))ï¼Œå…¶ä¸­ n ä¸º s çš„é•¿åº¦ï¼Œm ä¸º t çš„é•¿åº¦ã€‚ç”±äºæ¯ä¸ªçŠ¶æ€åªä¼šè®¡ç®—ä¸€æ¬¡ï¼Œå› æ­¤åŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦ = çŠ¶æ€ä¸ªæ•° Ã— å•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´ã€‚æœ¬é¢˜çš„çŠ¶æ€ä¸ªæ•°ä¸º O(nm)ï¼Œå•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´ä¸º O(n+m)ï¼ˆæ‹¼æ¥å­—ç¬¦ä¸²ï¼‰ï¼ˆå…¶ä¸­çš„ ans1å’Œans2é€’å½’ä¸‹å»ï¼Œä¸æ–­åœ°åœ¨æ‹¼æ¥å­—ç¬¦ä¸²è¿”å›ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¦‚æ­¤çš„ï¼Œæœ€åçš„æƒ…å†µå°±æ˜¯ï¼‰ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä¸º O(nm(n+m))ã€‚

* #### ç©ºé—´å¤æ‚åº¦ï¼šO(nm(n+m))ã€‚ä¸€å…±æœ‰ O(nm) ä¸ªçŠ¶æ€ï¼Œå†ç®—ä¸Šè¿”å›å€¼éœ€è¦ O(n+m) çš„ç©ºé—´ï¼Œæ‰€ä»¥éœ€è¦ O(nm(n+m)) çš„ç©ºé—´å®ç°è®°å¿†åŒ–ã€‚



## dfséå†åˆ†å·¥ï¼Œä¸€ä¸ªdfsè´Ÿè´£countï¼Œå¦å¤–ä¸€ä¸ªè´Ÿè´£æ„å»ºå­—ç¬¦ä¸²

```java
class Solution {
    public String shortestCommonSupersequence(String str1, String str2) {

        // è¿”å›ä»»æ„ä¸€ä¸ªå°±å¥½äº†
        // ä¿è¯å…¶ éƒ½æ˜¯å­åºåˆ—
        // ä¸¤ä¸ªéƒ½ä¸ç›¸ç­‰çš„è¯çš„ï¼Œé‚£ä¹ˆéšä¾¿é€‰æ‹©ä¸€ä¸ª
        // å¦‚æœä¸¤ä¸ªç›¸ç­‰çš„è¯çš„è¯ï¼Œéƒ½å‘å‰èµ° + 1
        // è¾¹ç•Œæ˜¯ s< ä¸” t<0
        // éœ€è¦æ‰©å®¹

        char[] c1 = str1.toCharArray();
        char[] c2 = str2.toCharArray();

        int[][] cache = new int[c1.length][c2.length];

        for(int[] c : cache)
        {
            Arrays.fill(c,-1);
        }

        return dfs(c1.length - 1, c2.length - 1, c1,c2,cache);

        
    }


    public String dfs(int s, int t, char[] c1,char[] c2,int[][] cache)
    {
        if(s < 0) return new String(Arrays.copyOfRange(c2,0,t+1));// å½“sä¸ºç©ºçš„æ—¶å€™ï¼Œé‚£ä¹ˆå‰©ä¸‹çš„tä¹Ÿå¾—ç»™å…¶è¿”å›å›å»ï¼Œåªæ„æˆå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†
        if(t < 0) return new String(Arrays.copyOfRange(c1,0,s+1));


        if(c1[s] == c2[t])
        {
            // æœ€å¥½çš„æ–¹æ³•å°±æ˜¯å…¨éƒ¨éƒ½ç§»åŠ¨ä¸€æ­¥
            return dfs(s-1,t-1,c1,c2,cache) + c1[s]; // 
        }

        // é‚£è¿™é‡Œä¸ºä»€ä¹ˆæ²¡æœ‰cacheå‘¢ï¼Ÿï¼Ÿè¿™ä¸ªæ˜¯å› ä¸ºï¼Œcacheä¸»è¦æ˜¯ç”¨æ¥ ä¸‹é¢ä¸¤ä¸ªé€’å½’çš„ï¼Œ
        // åªè¦ä½ å…¶ä¸­çš„ä¸€ä¸ªé€’å½’ä¸­æœ‰ï¼Œé‚£ä¹ˆå°±æ˜¯å¯ä»¥çš„


        // å¦‚æœä¸ç›¸ç­‰çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯ è¦ä¹ˆæ˜¯å·¦è¾¹èµ° è¦ä¹ˆæ˜¯å³è¾¹èµ° ä¸å¯ä»¥ä¸èµ°

        int left = dfsCount(s-1,t,c1,c2,cache); // ä¸€ä¸ªé€’å½’è®°å½•æ•°å­—ï¼Œä¸€ä¸ªé€’å½’è®°å½•å­—ç¬¦ä¸²ï¼Œ
        int right = dfsCount(s,t-1,c1,c2,cache); 

        // çœ‹çœ‹ä¸¤è¾¹è¿”å›å“ªä¸€ä¸ªæœ€çŸ­ï¼Œé‚£ä¹ˆå°±å–å“ªä¸€ä¸ª


        // ä¸»è¦æ˜¯è¿™é‡Œä¼˜åŒ–äº†ï¼Œå› ä¸ºä½ è¿™é‡Œæ˜¯ifï¼Œelse,dfsä¸¤ä¸ªä¸ä¼šå…¨éƒ½è°ƒç”¨çš„,æ•…è€Œæ˜¯é“¾å¼çš„
        if(left > right) return dfs(s,t-1,c1,c2,cache) + c2[t];
        else return dfs(s-1,t,c1,c2,cache) + c1[s];
        


    }


    public int dfsCount(int s, int t, char[] c1,char[] c2, int[][] cache)
    {
        if(s < 0) return t+1;
        if(t < 0)  return s+1;

        if(cache[s][t] != -1) return cache[s][t];

        if(c1[s] == c2[t])
        {
            return cache[s][t] = dfsCount(s-1,t-1,c1,c2,cache) + 1; // è¿™é‡Œè®°å½•çš„æ˜¯é•¿åº¦
        }

        int left = dfsCount(s-1,t,c1,c2,cache) + 1; // è®°å½•é•¿åº¦
        int right = dfsCount(s,t-1,c1,c2,cache) + 1;

        return cache[s][t] = Math.min(left,right);
        
    

    }
}
```

* #### **æ¶‰åŠå­—ç¬¦ä¸²æ‹¼æ¥é—®é¢˜æ—¶**ï¼Œä¼˜å…ˆè€ƒè™‘æ˜¯å¦å¯ä»¥å…ˆè®¡ç®—é•¿åº¦ã€åæ„é€ è·¯å¾„ã€‚

* #### å¤æ‚åº¦åˆ†æ

  #### æ—¶é—´å¤æ‚åº¦ï¼šO(nm)ï¼Œå…¶ä¸­ n ä¸º s çš„é•¿åº¦ï¼Œm ä¸º t çš„é•¿åº¦ã€‚ç”±äºæ¯ä¸ªçŠ¶æ€åªä¼šè®¡ç®—ä¸€æ¬¡ï¼Œå› æ­¤åŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦ = çŠ¶æ€ä¸ªæ•° Ã— å•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´ã€‚æœ¬é¢˜çš„çŠ¶æ€ä¸ªæ•°ä¸º O(nm)ï¼Œå•ä¸ªçŠ¶æ€çš„è®¡ç®—æ—¶é—´ä¸º O(1)ï¼Œå› æ­¤è®°å¿†åŒ–æœç´¢çš„æ—¶é—´å¤æ‚åº¦ä¸º O(nm)ã€‚æ„é€ ç­”æ¡ˆçš„éƒ¨åˆ†ï¼Œé€’å½’ O(n+m) æ¬¡ï¼ˆæ³¨æ„ makeAns çš„é€’å½’æ ‘ä»…ä»…æ˜¯ä¸€æ¡é“¾ï¼‰ï¼Œæ¯æ¬¡æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä¸åŒè¯­è¨€çš„å®ç°ä¸åŒï¼Œå¦‚æœç›´æ¥åŠ åœ¨å­—ç¬¦ä¸²æœ«å°¾å°±æ˜¯ O(1)ï¼Œå¦‚æœç”Ÿæˆæ–°çš„å­—ç¬¦ä¸²å°±æ˜¯ O(n+m)ï¼Œæ‰€ä»¥æ„é€ ç­”æ¡ˆè¿™éƒ¨åˆ†éœ€è¦ O(n+m) æˆ– O((n+m) 2 ) çš„æ—¶é—´ï¼Œè¿™ä¼šåœ¨ä¸‹é¢çš„ä»£ç ä¸­è¿›ä¸€æ­¥ä¼˜åŒ–æˆ O(n+m)ã€‚

* #### ç©ºé—´å¤æ‚åº¦ï¼šO(nm)ã€‚ä¸€å…±æœ‰ O(nm) ä¸ªçŠ¶æ€ï¼Œéœ€è¦ O(nm) çš„ç©ºé—´å®ç°è®°å¿†åŒ–

  * #### è¿™é‡Œåªè¦æ˜¯ç©ºé—´å¤æ‚åº¦çš„ä¼˜åŒ–ã€‚

  



# ä»€ä¹ˆæ—¶å€™ ä½¿ç”¨é€‰è¿˜æ˜¯ä¸é€‰å‘¢ï¼Ÿï¼Ÿ

### ç­”ç–‘

* #### é—®ï¼šä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œä»€ä¹ˆæ ·çš„é¢˜ç›®é€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ï¼Ÿ

#### ç­”ï¼šæˆ‘åˆ†æˆä¸¤ç±»é—®é¢˜ï¼š

* #### ç›¸é‚»æ— å…³å­åºåˆ—é—®é¢˜ï¼ˆæ¯”å¦‚ 0-1 èƒŒåŒ…ï¼‰ï¼Œé€‚åˆã€Œé€‰æˆ–ä¸é€‰ã€ã€‚æ¯ä¸ªå…ƒç´ äº’ç›¸ç‹¬ç«‹ï¼Œåªéœ€ä¾æ¬¡è€ƒè™‘æ¯ä¸ªç‰©å“é€‰æˆ–ä¸é€‰ã€‚

* #### ç›¸é‚»ç›¸å…³å­åºåˆ—é—®é¢˜ï¼ˆæ¯”å¦‚æœ¬é¢˜ï¼‰ï¼Œé€‚åˆã€Œæšä¸¾é€‰å“ªä¸ªã€ã€‚æˆ‘ä»¬éœ€è¦çŸ¥é“å­åºåˆ—ä¸­çš„ç›¸é‚»ä¸¤ä¸ªæ•°çš„å…³ç³»ã€‚å¯¹äºæœ¬é¢˜æ¥è¯´ï¼Œæšä¸¾ nums[i] å¿…é€‰ï¼Œç„¶åæšä¸¾å‰ä¸€ä¸ªå¿…é€‰çš„æ•°ï¼Œæ–¹ä¾¿æ¯”å¤§å°ã€‚å¦‚æœç¡¬è¦ç”¨ã€Œé€‰æˆ–ä¸é€‰ã€ï¼Œéœ€è¦é¢å¤–è®°å½•ä¸Šä¸€ä¸ªé€‰çš„æ•°çš„ä¸‹æ ‡ï¼Œç®—æ³•æ€»ä½“çš„ç©ºé—´å¤æ‚åº¦ä¸º O(n 2 )ï¼Œè€Œæšä¸¾é€‰å“ªä¸ªåªéœ€è¦ O(n) çš„ç©ºé—´ã€‚







# æ•°ç»„å‡åºæŠ€å·§

```java
Integer[] ids = new Integer[n];
for(int i = 0; i < n; i++) ids[i] = i;
Arrays.sort(ids,(i,j) -> scores[i] != scores[j] ? scores[i] - scores[j] : ages[i] - ages[j]); // æŒ‰ç…§åˆ†æ•° å‡åºï¼Œå¦åˆ™çš„è¯ï¼ŒæŒ‰ç…§å¹´é¾„ï¼ˆå‡å·å°±æ˜¯å‡åºï¼‰
```

```java
å¾—åˆ°idsä¹‹åï¼Œä¸ç®¡æ˜¯ä»ååˆ°å‰è¿˜æ˜¯ä»å‰åˆ°åï¼Œä½¿ç”¨idsè½¬æ¢ä¸‹ï¼Œæ¯”å¦‚score[ids[n-1]]çš„è¯ï¼Œå°±ç›¸å½“äºåœ¨è®¿é—®æœ€å¤§çš„åˆ†æ•°å“ªä½äº†
```



![](../pictures/å…³äºå›æº¯ï¼Œæ·±åº¦éå†ä»¥åŠé€’å½’å’Œdpçš„ä¸€äº›ç†è§£.png)



* #### å¯ä»¥ä»å¶å­çš„è§’åº¦æ€è€ƒï¼Œæƒ³ä¸€æƒ³ç©ºèŠ‚ç‚¹è¿”å›ä»€ä¹ˆï¼Œå¯ä»¥è®©å¶å­èŠ‚ç‚¹è¿”å›æ­£ç¡®çš„ç»“æœã€‚

* #### ä»å¶å­çš„è§’åº¦å»æ€è€ƒçš„è¯ï¼Œå°±å¯ä»¥å®Œè™åˆå§‹åŒ–ã€‚





# å¤šå‰æ ‘ä¸­éœ€è¦æŒæ¡çš„ç»“æ„

## âœ… LeetCode æ ‘ç»“æ„çš„å¸¸è§è¡¨ç¤ºæ³•æ€»è§ˆ

| ç¼–å· | è¡¨ç¤ºæ–¹å¼              | åç§°ï¼ˆå¸¸è§æœ¯è¯­ï¼‰              | ä½¿ç”¨åœºæ™¯/é¢˜å‹                        | æ˜¯å¦å¿…é¡»æŒæ¡ |
| ---- | --------------------- | ----------------------------- | ------------------------------------ | ------------ |
| â‘     | `TreeNode` é“¾å¼ç»“æ„   | æŒ‡é’ˆå‹æ ‘ / äºŒå‰æ ‘ç»“æ„ä½“       | âœ… 95% çš„äºŒå‰æ ‘é¢˜ç›®                   | âœ… å¿…é¡»       |
| â‘¡    | `[1,2,3,null,4]`      | å±‚åºæ•°ç»„è¡¨ç¤ºæ³•ï¼ˆLevel Orderï¼‰ | è¾“å…¥/è¾“å‡ºå¸¸è§ï¼Œç”¨äºæ„é€ äºŒå‰æ ‘        | âœ… å¿…é¡»       |
| â‘¢    | `parent[i] = j`       | çˆ¶èŠ‚ç‚¹æ•°ç»„è¡¨ç¤ºæ³•              | æ ‘ä¸Š DPã€å¹¶æŸ¥é›†å»ºæ ‘ã€å›¾è½¬æ ‘ç­‰        | âœ… å¿…é¡»       |
| â‘£    | é‚»æ¥è¡¨ `g[i] = [...]` | é‚»æ¥è¡¨ç»“æ„ï¼ˆAdjacency Listï¼‰  | å›¾è½¬æ ‘ï¼ˆæ ‘å½¢ DPï¼‰ã€é€šç”¨å¤šå‰æ ‘ã€Nå‰æ ‘ | âœ… å¿…é¡»       |

## çˆ¶äº²èŠ‚ç‚¹æ•°ç»„è¡¨ç¤ºæ³•â€”â€”å„¿å­æŸ¥çˆ¶äº²

* #### å…¶å„¿å­èŠ‚ç‚¹é»˜è®¤æ˜¯`0-n`çš„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å„¿å­çš„çˆ¶äº²çš„èŠ‚ç‚¹ã€‚

### âœ… å…ˆçœ‹ `parent[]` çš„æ„ä¹‰

```python
parent = [-1, 0, 0, 1, 1, 2]
```

è¿™ä¸ªæ•°ç»„æœ¬è´¨ä¸Šæ˜¯ï¼š

> ç”¨ **â€œå„¿å­ â†’ çˆ¶äº²â€** çš„æ–¹å¼è¡¨ç¤ºä¸€æ£µæ ‘ã€‚

ä½ æƒ³çŸ¥é“è°çš„çˆ¶äº²ï¼Œåªè¦æŸ¥ä¸€ä¸‹ `parent[i]` å°±è¡Œäº†ï¼š

```python
parent[4] == 1   # è¡¨ç¤º 4 çš„çˆ¶äº²æ˜¯ 1
```



## é‚»æ¥è¡¨â€”â€”çˆ¶äº²æŸ¥å„¿å­

### âœ… è€Œ `g[]` æ˜¯è½¬è¿‡æ¥ï¼Œç”¨ **â€œçˆ¶äº² â†’ å„¿å­ä»¬â€** çš„ç»“æ„æ¥è¡¨ç¤º

```python
g[0] = [1, 2]  # 0 çš„å„¿å­æœ‰ 1ã€2
g[1] = [3, 4]  # 1 çš„å„¿å­æœ‰ 3ã€4
```

> è¿™å°±æ˜¯ **é‚»æ¥è¡¨**ï¼Œæ–¹å‘åäº†ï¼Œä½†æ˜¯æ›´åˆ©äºâ€œä»ä¸Šå¾€ä¸‹â€å¤„ç†ï¼ˆæ¯”å¦‚ DFSã€BFSï¼‰

## ğŸŒ³ ä¸¾ä¸ªä¾‹å­ï¼šç”¨é‚»æ¥è¡¨è¡¨ç¤ºä¸€æ£µæ ‘

æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸‹é¢è¿™æ ·ä¸€æ£µæ ‘ï¼š

```python
       0
      /   \
     1     2
    / \     \
   3   4     5
```

ä½ å¯ä»¥ç”¨ `parent = [-1, 0, 0, 1, 1, 2]` è¡¨ç¤ºè¿™æ£µæ ‘
 å«ä¹‰æ˜¯ï¼š

- `parent[0] = -1` è¡¨ç¤º 0 æ˜¯æ ¹èŠ‚ç‚¹
- `parent[1] = 0`ï¼Œ1 æ˜¯ 0 çš„å„¿å­
- `parent[2] = 0`ï¼Œ2 æ˜¯ 0 çš„å„¿å­
- `parent[3] = 1`ï¼Œ3 æ˜¯ 1 çš„å„¿å­
- `parent[4] = 1`ï¼Œ4 æ˜¯ 1 çš„å„¿å­
- `parent[5] = 2`ï¼Œ5 æ˜¯ 2 çš„å„¿å­

------

### âœ… æˆ‘ä»¬ç”¨é‚»æ¥è¡¨æ¥è¡¨ç¤ºä¸Šé¢çš„æ ‘ç»“æ„ï¼š

```python
g = [
    [1, 2],  # 0 çš„å­©å­æ˜¯ 1 å’Œ 2
    [3, 4],  # 1 çš„å­©å­æ˜¯ 3 å’Œ 4
    [5],     # 2 çš„å­©å­æ˜¯ 5
    [],      # 3 æ²¡æœ‰å­©å­
    [],      # 4 æ²¡æœ‰å­©å­
    []       # 5 æ²¡æœ‰å­©å­
]
```

è¿™é‡Œï¼š

- `g` æ˜¯ä¸€ä¸ª listï¼ˆåˆ—è¡¨ï¼‰
- `g[i]` è¡¨ç¤ºèŠ‚ç‚¹ `i` çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼ˆå³â€œå®ƒè¿ç€è°â€ï¼‰

è¿™å°±æ˜¯é‚»æ¥è¡¨ï¼

## ğŸ” åŒºåˆ«åˆ°åº•åœ¨å“ªé‡Œï¼Ÿ

| å¯¹æ¯”ç‚¹     | `parent[]`             | `g[]`ï¼ˆé‚»æ¥è¡¨ï¼‰     |
| ---------- | ---------------------- | ------------------- |
| è¡¨ç¤ºæ–¹å‘   | å„¿å­ â†’ çˆ¶äº²            | çˆ¶äº² â†’ å„¿å­         |
| æŸ¥çˆ¶èŠ‚ç‚¹   | O(1)ï¼šç›´æ¥ `parent[i]` | âŒä¸æ”¯æŒ             |
| æŸ¥å­èŠ‚ç‚¹   | âŒéœ€è¦éå†å…¨éƒ¨ parent[] | âœ… O(1)ï¼šç›´æ¥ `g[i]` |
| é€‚åˆåšä»€ä¹ˆ | å›æº¯è·¯å¾„ï¼ˆä»å¶å­å¾€ä¸Šï¼‰ | éå†ï¼ˆä»æ ¹å¾€ä¸‹ï¼‰    |
| DFS / BFS  | ä¸æ–¹ä¾¿ï¼ŒæŸ¥å­èŠ‚ç‚¹å›°éš¾   | éå¸¸æ–¹ä¾¿            |



## çˆ¶äº²èŠ‚ç‚¹æ•°ç»„è½¬æ¢æˆé‚»æ¥è¡¨

```java
List<List<Integer>> list = new ArrayList<>();
int n = parent.length;
for(int i = 0; i < n; i++) list.add(new ArrayList<>()); // ä»0å¼€å§‹åˆå§‹åŒ–

for(int i = 1; i < n; i++) list.get(parent[i]).add(i); // å¾—åˆ°çˆ¶äº²ï¼ŒåŠ å…¥å„¿å­ï¼Œæ•°æ®ä»å¼€å§‹ç»´æŠ¤
```

* #### æ³¨æ„è¿™é‡Œå»ºè¡¨çš„æ—¶å€™ï¼Œ`int i = 0`å¼€å§‹çš„

* #### è€Œåç»­çš„`int i = 1`å¼€å§‹éå†ä»`1`å¼€å§‹çš„èŠ‚ç‚¹çš„çˆ¶äº²ï¼Œä¸ºä»€ä¹ˆè·³è¿‡0ï¼Ÿï¼Ÿå› ä¸º`0`æ˜¯æ²¡æœ‰çˆ¶äº²çš„ï¼Œæ‰€ä»¥ä¸ç”¨ç»´æŠ¤ã€‚å› ä¸ºæˆ‘ä»¬æœ€ç»ˆåˆ›å»ºçš„æ˜¯ï¼Œä»¥`çˆ¶äº² -ã€‹æ‰¾å„¿å­`è¿™æ ·çš„é‚»æ¥è¡¨ã€‚





















