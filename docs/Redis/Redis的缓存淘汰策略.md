# Redis的缓存淘汰策略

## 🎯 你的理解版本（非常准确）：

> **LRU：**看最近有没有用，哪怕你以前用得再多，只要最近没动，就会被踢掉。
>  **LFU：**看历史上到底用了几次，哪怕你最近没动，只要你总用得多，就保住你。

## ✅ 二、深入区别

| 对比项              | allkeys-lru                            | allkeys-lfu                              |
| ------------------- | -------------------------------------- | ---------------------------------------- |
| 👀 本质依据          | **最近访问时间（时间维度）**           | **访问频率（次数维度）**                 |
| 📅 偏向              | 更适合短期热点                         | 更适合长期热点识别                       |
| 🔁 访问1次就热了吗？ | 是的，访问后短期内就会“变热”           | 不一定，要访问多次才能提高频率           |
| 🧠 Redis 内部实现    | 每个 key 记录一个最近使用时间戳（LRU） | 每个 key 维护一个 8bit 访问计数器（LFU） |
| 🔄 状态变化          | 有“更新就靠前”的即时反应               | 有“冷却+加权+分衰减”的趋势累积机制       |
| 🔥 热点精准度        | 热点识别快，但不稳定                   | 热点识别慢，但更稳定                     |
| ❌ 弊端              | 突发访问可能造成冷数据留下             | 老数据可能“赖着不走”                     |

